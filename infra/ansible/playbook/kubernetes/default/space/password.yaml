---
- name: Create password secret // infra/ansible/playbook/kubernetes/default/space/password.yaml
  hosts: dev
  become: true

  vars_files:
    - ../../../secrets/secrets.yaml

  tasks:
    - name: Create password secret in each namespace
      ansible.builtin.shell: |
        kubectl create secret generic gitlab-secret-password \
          --from-literal=password="{{ password }}" \
          -n nm-gitlab \
          --dry-run=client -o yaml | kubectl apply -f -
